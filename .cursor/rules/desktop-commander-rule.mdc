---
description: 
globs: 
alwaysApply: true
---
# MCP DesktopCommander 使用规则

## 核心原则
安全、精确、高效。此工具直接与用户的本地文件系统和终端交互，必须谨慎使用。

## 规则详情

1.  **优先使用专用工具**
    -   **文件操作**: 严禁使用 `execute_command` 执行 `cat`, `ls`, `dir`, `echo` 等通用命令来读写或列出文件。必须使用 `read_file`, `write_file`, `list_directory` 等专用函数。
    -   **代码搜索**: 严禁使用 `grep`。必须使用 `search_code` 进行内容搜索。
    -   **文件查找**: 必须使用 `search_files` 按名称查找文件。

2.  **路径处理：绝对路径是唯一标准**
    -   在所有需要路径的参数中（`path`, `source`, `destination` 等），**必须** 使用绝对路径。
    -   这可以避免因工作目录不确定而导致的一切问题。

3.  **文件写入：分块是标准流程**
    -   **必须** 将所有文件写入操作（`write_file`）分解为每块最多 25-30 行的多个小块。
    -   **流程**:
        1.  第一块: 使用 `mode: 'rewrite'`。
        2.  后续所有块: 使用 `mode: 'append'`。
    -   这并非应急措施，而是**标准操作规程**，适用于所有文件的创建和修改。

4.  **文件编辑：精确、小范围**
    -   使用 `edit_block` 时，`old_string` 必须包含足够的上下文以保证其在文件中的唯一性。
    -   一次只做一个逻辑上独立的修改。复杂的修改应分解为多个 `edit_block` 调用。

5.  **配置与环境**
    -   在执行任何操作前，可使用 `get_config` 了解当前的环境限制（如读写行数限制、允许的目录等）。
    -   谨慎使用 `set_config_value`。

